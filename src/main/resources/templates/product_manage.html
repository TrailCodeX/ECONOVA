<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>EcoNova | Manage Products</title>
<style>
* {
	margin: 0;
	padding: 0;
	box-sizing: border-box;
}
body {
	font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
	background-color: #f0f4f8;
	color: #2d3748;
}

/* SIDEBAR */
.sidebar {
	position: fixed;
	left: 0;
	top: 0;
	width: 260px;
	height: 100vh;
	background: #ffffff;
	border-right: 1px solid #e9ecef;
	overflow-y: auto;
	z-index: 1000;
}
.sidebar-header {
	padding: 24px 20px;
	border-bottom: 1px solid #e9ecef;
}
.sidebar-header h2 {
	font-size: 20px;
	font-weight: 600;
	color: #212529;
}
.sidebar-nav {
	padding: 16px 0;
}
.sidebar a {
	display: flex;
	align-items: center;
	gap: 12px;
	color: #495057;
	padding: 10px 20px;
	text-decoration: none;
	font-size: 14px;
	transition: all 0.2s;
}
.sidebar a:hover {
	background: #f8f9fa;
	color: #0d6efd;
}
.sidebar a.active {
	background: #0d6efd;
	color: white;
}
.sidebar-footer {
	position: absolute;
	bottom: 0;
	left: 0;
	right: 0;
	padding: 16px 20px;
	border-top: 1px solid #e9ecef;
	background: #ffffff;
}
.logout-btn {
	display: flex;
	align-items: center;
	justify-content: center;
	gap: 8px;
	background: #dc3545;
	color: white;
	padding: 10px;
	border-radius: 6px;
	text-decoration: none;
	font-size: 14px;
	font-weight: 500;
	transition: background 0.2s;
}
.logout-btn:hover {
	background: #bb2d3b;
}

/* MAIN CONTENT */
.main-content {
	margin-left: 260px;
	min-height: 100vh;
	background: #f5f7fa;
}
.page-header {
	background: #ffffff;
	padding: 2rem 2.5rem;
	border-bottom: 1px solid #e9ecef;
	display: flex;
	justify-content: space-between;
	align-items: center;
}
.header-left h1 {
	font-size: 28px;
	font-weight: 700;
	color: #212529;
}
.header-left p {
	font-size: 16px;
	color: #6c757d;
}
.home-btn {
	display: flex;
	align-items: center;
	gap: 8px;
	padding: 10px 20px;
	background: #0d6efd;
	color: white;
	text-decoration: none;
	border-radius: 6px;
	font-size: 14px;
	font-weight: 500;
	transition: all 0.2s;
}
.home-btn:hover {
	background: #0b5ed7;
	transform: translateY(-2px);
	box-shadow: 0 4px 8px rgba(13, 110, 253, 0.2);
}

/* PRODUCT GRID */
.container {
	padding: 2rem;
}
.product-grid {
	display: grid;
	grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
	gap: 1.5rem;
}
.product-card {
	background: white;
	border-radius: 10px;
	box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
	padding: 1rem;
	text-align: center;
}
.product-card img {
	width: 100%;
	height: 180px;
	object-fit: cover;
	border-radius: 10px;
}
.product-card h3 {
	color: #333;
}
.product-card p {
	color: #555;
}
.price {
	color: #007bff;
	font-weight: bold;
}
.actions {
	margin-top: 1rem;
}
.btn {
	padding: 0.5rem 1rem;
	margin: 0.25rem;
	border: none;
	border-radius: 5px;
	cursor: pointer;
	text-decoration: none;
	display: inline-block;
}
.btn-edit {
	background-color: #28a745;
	color: white;
}
.btn-delete {
	background-color: #dc3545;
	color: white;
}
</style>
</head>
<body>

<!-- SIDEBAR -->
<div class="sidebar">
	<div class="sidebar-header">
		<h2>üåø EcoNova Admin</h2>
	</div>
	<div class="sidebar-nav">
		<a href="/admin/product/manage" class="active">All Products</a>
		<a href="/admin/product/add">Add Product</a>
		<a href="/admin/category/manage">All Categories</a>
		<a href="/admin/category/add">Add Category</a>
		<a href="/admin/subcategory/manage">All Subcategories</a>
		<a href="/admin/subcategory/add">Add Subcategory</a>
		<a href="/admin/all">Orders</a>
	</div>
	<div class="sidebar-footer">
		<a href="/logout" class="logout-btn">üö™ Logout</a>
	</div>
</div>

<!-- MAIN CONTENT -->
<div class="main-content">
	<div class="page-header">
		<div class="header-left">
			<h1>Manage Products</h1>
			<p>View, edit or delete available products</p>
		</div>
		<a href="/admin/home" class="home-btn">üè† Back to Home</a>
	</div>

	<div class="container">
		<!-- Filter by Subcategory -->
		<div style="margin-bottom: 1rem;">
			<label for="subcategoryFilter">Filter by Subcategory:</label>
			<select id="subcategoryFilter"
				onchange="window.location.href='/admin/product/manage?subcategory=' + this.value">
				<option value="0" th:selected="${selectedSubcategory == 0}">All Products</option>
				<option th:each="subcat : ${subcategories}"
				        th:value="${subcat.id}"
				        th:text="${subcat.name}"
				        th:selected="${selectedSubcategory == subcat.id}"></option>
			</select>
		</div>

		<!-- Product Grid -->
		<div class="product-grid">
			<div class="product-card" th:each="product : ${products}">
				<img th:src="@{${product.imageUrl}}"
				     th:alt="${product.name}"
				     onerror="this.src='https://via.placeholder.com/250x180?text=No+Image'">
				<h3 th:text="${product.name}">Product Name</h3>
				<p th:text="${product.description}">Description</p>
				<p class="price" th:text="'‚Çπ' + ${product.price}">‚Çπ299</p>
				<p>Quantity: <span th:text="${product.quantity}">0</span></p>

				<div class="actions">
					<a th:href="@{/admin/product/edit/{id}(id=${product.id})}" class="btn btn-edit">Edit</a>
					<a th:href="@{/admin/product/delete/{id}(id=${product.id})}"
					   class="btn btn-delete"
					   onclick="return confirm('Are you sure you want to delete this product?')">Delete</a>
				</div>
			</div>
		</div>

		<!-- Show message if no products -->
		<div th:if="${#lists.isEmpty(products)}"
		     style="text-align: center; padding: 2rem;">
			<p>No products found.</p>
		</div>
	</div>
</div>

</body>
</html>
